<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage Inspector</title>
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; color: #111; }
        h1 { font-size: 20px; margin-bottom: 12px; }
        .row { margin: 12px 0; }
        input { padding: 8px 10px; width: 360px; max-width: 100%; }
        button { padding: 8px 12px; margin-left: 8px; cursor: pointer; }
        pre { background: #f6f8fa; border: 1px solid #e5e7eb; padding: 12px; border-radius: 6px; overflow: auto; }
        .muted { color: #667085; font-size: 12px; }
        .ok { color: #16a34a; }
        .warn { color: #b45309; }
        .err { color: #dc2626; }
    </style>
    <script>
        async function fetchKey(){
            const key = document.getElementById('key').value.trim();
            const out = document.getElementById('out');
            out.textContent = 'Loading...';
            try {
                const res = await fetch(`storage_api.php?action=get&key=${encodeURIComponent(key)}`);
                const json = await res.json();
                out.textContent = JSON.stringify(json, null, 2);
            } catch (e) {
                out.textContent = `Error: ${e && e.message}`;
            }
        }
        async function fetchNotifications(){
            document.getElementById('key').value = 'notifications';
            fetchKey();
        }
        async function health(){
            const el = document.getElementById('health');
            el.textContent = 'checking...';
            try {
                const res = await fetch('healthz');
                el.textContent = `${res.status} ${res.statusText}`;
            } catch(e) {
                el.textContent = `error: ${e && e.message}`;
            }
        }
        window.addEventListener('DOMContentLoaded', health);
    </script>
    </head>
<body>
    <h1>Storage Inspector</h1>
    <div class="muted">Use this page to verify server-stored values like <code>notifications</code>.</div>
    <div class="row">
        <label>Key: <input id="key" placeholder="e.g. notifications, depositRequests, withdrawRequests" /></label>
        <button onclick="fetchKey()">Fetch</button>
        <button onclick="fetchNotifications()">Fetch notifications</button>
    </div>
    <div class="row">
        Health: <span id="health" class="muted">...</span>
    </div>
    <pre id="out">Result will appear here</pre>
</body>
</html>


